<!DOCTYPE html>



<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

    <script>

        async function getNewTask() {
            let data = sessionStorage.getItem("next_task_content");
            if (data == null) {
                const response = await fetch('/tasks/tasks');
                if (!response.ok) {
                    console.error("Failed to fetch new task");
                    return;
                }
                data = await response.json();
            } else {
                data = JSON.parse(data);
            }

            await sessionStorage.setItem("task_content", JSON.stringify(data));
            let taskType = data.task_type; // Get the task type
            if (taskType === "Word2Explanation") {
                window.location.replace("/static/task_word2explanation.html");
            }
            else if (taskType === "MatchWordExplanation") {
                window.location.replace("/static/task_match.html");
            } else if (taskType === "SentenceWithPlaceholder") {
                window.location.replace("/static/task_typing.html");
            }
            else {
                alert(`Unknow task type ${taskType}`);
            }
        }

        let cnt = parseInt(sessionStorage.getItem("completed_tasks")) || 0;
        cnt += 1;
        sessionStorage.setItem("completed_tasks", cnt);


        getNewTask();
    </script>

</body>
</html>